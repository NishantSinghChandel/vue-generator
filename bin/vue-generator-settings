#!/usr/bin/env node

const program = require('commander');
const chalk = require('chalk');
const Settings = require('../src/settings');

program
  .option('-p, --page-destination <destination>', 'Set page default destination')
  .option('-s, --store-destination <destination>', 'Set store default destination')
  .option('-c, --component-destination <destination>', 'Set component default destination')
  .option('-t, --template-path <destination>', 'Set default template directory')
  .option('-l, --log', 'Log settings')
  .parse(process.argv);

if (program.log) {
  console.log(chalk.green('Settings:'));
  console.log(Settings.logSettings(Settings.getSettings()));
  process.exit(1);
}

const settings = {};

if (program.pageDestination) {
  settings['pageDestination'] = program.pageDestination;
}

if (program.storeDestination) {
  settings['storeDestination'] = program.storeDestination;
}

if (program.componentDestination) {
  settings['componentDestination'] = program.componentDestination;
}

if (program.templatePath) {
  settings['templatePath'] = program.templatePath;
}

Settings.setGlobalSettings(settings);

console.log();
console.log(chalk.green('Settings updated:'));
Settings.logSettings(Settings.getSettings());
